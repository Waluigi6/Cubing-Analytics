<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A brief description of your page">
    <title>Cube Analytics</title>
    <style>
        body {
            background: linear-gradient(to right, #f2ccff,   #d183eb);
        }
    </style>
    <link rel="stylesheet" href="styles.css"> <!-- Link to your CSS file -->
</head>
<body>
    <header>
        <h1>Welcome?</h1>
    </header>
    <main>
        <p>This is my website.</p>
        <input type="text" id="nameInput" placeholder="Name/Username (Optional)">
        
        
        <h1 id="scramble">scramble</h1>
        <h1 id="timer">0.00</h1>
        
        <button onclick="startTimer()" id ="timerButton" class="rainbowButton" style="width:96vw; height:30vw; font-size:10vw; margin: auto; align-items: center;">Start Timer</button>

        <p><a href="faq.html">Tutorial/FAQ</a></p>

<br>


<p id="title">---</p>
<p id="amountOfSolves">---</p>
<p id="maxMin">---</p>
<br><br><br>

<div style="display: flex; justify-content: left; height: 300px;">
<p id="plainScores" style="margin-right: 50px;">---</p>
<canvas id="myCanvas" width="400" height="300" style="border:1px solid #000000;"></canvas>
</div>


<p id="break"><br></p>

<button onclick="deleteSolve()" id ="delteButton">Delete solves</button>
<br><br>
<input type="text" id="dataInput" placeholder="Copy and paste your data from a CSV file.">
<button onclick="displayInput()">Submit</button>

<script src="https://waluigi6.github.io/Cubing-Analytics/scrambles.js"></script>
<script type="module">



</script>

<script> 
const br =     document.getElementById('break').innerText
document.getElementById('scramble').innerText = scrambles[Math.floor(Math.random() * scrambles.length)];
const btn = document.getElementById('timerButton');
const canvas = document.getElementById('myCanvas');
const ctx = canvas.getContext('2d');

let times = []
function displayInput() {
    
  const name = document.getElementById("nameInput").value;
  const data = document.getElementById("dataInput").value;
  document.getElementById("title").innerText = name + "'s cubing data";
    

let array = data.split(';');
document.getElementById("amountOfSolves").innerText = "Solves: "  + times.length;


for(i = 0; i < array.length; i++){
    if (((i - 1) % 5) === 0 && i > 5){
        times.push(array[i])
    }
}

  document.getElementById("maxMin").innerText = "Best time, Worst time: " + Math.min(...times) + ", " + Math.max(...times);


document.getElementById("plainScores").innerText = ""
for(i = 0; i < times.length; i++){
  document.getElementById("plainScores").innerText += (i+1) + ". " + (Math.round(times[i] * 100)/100) + "\n"
}   

    document.getElementById('myCanvas').width = window.innerWidth - 200;
  ctx.fillStyle = 'white';

  ctx.fillRect(0, 0, 4000, 4000);

  ctx.fillStyle = 'blue';
ctx.beginPath();
ctx.moveTo(0, 0);


ctx.fillText(times.length, document.getElementById('myCanvas').width - 20, document.getElementById('myCanvas').height - 10); 
    for(i = 0; i < times.length; i++){
    if (times[i] === Math.max(...times)){
        ctx.fillText(Math.max(...times) + " seconds", 10, ((times[i]/Math.max(...times)) * 280) * -1 + 290); /* Draw text for the max value */
    }
       if (times[i] === Math.min(...times)){
        ctx.fillText(Math.min(...times) + " seconds", 10, ((times[i]/Math.max(...times)) * 280) * -1 + 290); /* Draw text for the min value*/
    }
       if (times[i] === times.length - 1){
        ctx.fillText(times.length, document.getElementById('myCanvas').width - 200, 100); /* Draw text for the min value*/
    }



    ctx.lineTo(((document.getElementById('myCanvas').width - 20)/(times.length - 1)) * i, ((times[i]/Math.max(...times)) * 280) * -1 + 290);
    ctx.stroke();
    ctx.fillRect(((document.getElementById('myCanvas').width - 20)/(times.length - 1)) * i, ((times[i]/Math.max(...times)) * 280) * -1 + 290, 3, 3);
    }
    document.getElementById('break').innerText = br.repeat(5 + ((times.length > 17) * (times.length - 17)))
}



let timeLeft = 0;

var timerGoing
function startTimer(){
            displayInput()
    const timerElement = document.getElementById("timer");

    if (document.getElementById("timerButton").innerText === "Start Timer"){
        document.getElementById('scramble').innerText = "~     ~     ~     ~     ~     ~     ~     ~     ~     ~     ~     ~     ~     ~     ~     ~     ~     ~     ~     ~     ~     ~     ~"
        btn.classList.add('active');
        if (timerGoing === false){
            timeLeft = Date.now()
            timerElement.textContent = 0

        }
        timerGoing = true;

    document.getElementById("timerButton").innerText = "Stop Timer";
        timeLeft = Date.now(); // Set countdown time in seconds

    const countdown = setInterval(() => {
        if (document.getElementById("timerButton").innerText === "Stop Timer"){
        timerElement.textContent = Math.round((Date.now() - timeLeft)/100)/10

        console.log(Date.now());
        
    }
    else{
        
          clearInterval(countdown);

    }
      
    }, 10); // Update every second
}
else{
    document.getElementById('scramble').innerText = scrambles[Math.floor(Math.random() * scrambles.length)];
            btn.classList.remove('active');


    document.getElementById("timer").innerText = Math.round((Date.now() - timeLeft)/10)/100
    timerGoing = false;
        document.getElementById("timerButton").innerText = "Start Timer";

        times.push((Date.now() - timeLeft)/1000)


}
        

displayInput()
}


function deleteSolve(){

    var temp = prompt("jajaja");
    
    if (temp === "0"){
        alert("cancelling");
    }
    else{
        times.splice(temp - 1, 1);
    }
    displayInput();
}

</script>




        
        <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RNHLEQX9J1"></script>
<script>
    
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RNHLEQX9J1');
</script>
    </main>
    <footer>
        <p>&copy; 2025 Your Name or Company</p>
    </footer>
    <script src="script.js"></script> <!-- Link to your JavaScript file -->
</body>
</html>
