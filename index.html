<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A brief description of your page">
    <title>Cube Analytics</title>
    <style>
        body {
            background: linear-gradient(to right, #f2ccff,   #e699ff);
        }
    </style>
    <link rel="stylesheet" href="styles.css"> <!-- Link to your CSS file -->
</head>
<body>
    <header>
        <h1>Welcome?</h1>
    </header>
    <main>
        <p>This is my website.</p>
        <input type="text" id="nameInput" placeholder="Name/Username (Optional)">

        <h1 id="timer">0.00</h1>
        
        <button onclick="startTimer()" id ="timerButton" class="rainbowButton" style="width:96vw; height:30vw; font-size:10vw">Start Timer</button>

        <p><a href="faq.html">Tutorial/FAQ</a></p>

<br>


<p id="title">---</p>
<p id="amountOfSolves">---</p>
<p id="maxMin">---</p>
<br><br><br>

<div style="display: flex; justify-content: left;">
<p id="plainScores" style="margin-right: 200px;">---</p>
<canvas id="myCanvas" width="400" height="300" style="border:1px solid #000000;"></canvas>
</div>


<br><br><br><br><br>
<input type="text" id="dataInput" placeholder="Copy and paste your data from a CSV file.">
<button onclick="displayInput()">Submit</button>

<script type="module">
import { randomScrambleForEvent } from "https://cdn.cubing.net/v0/js/cubing/scramble";

const scramble = await randomScrambleForEvent("333");
alert(scramble);
</script>

<script>
const canvas = document.getElementById('myCanvas');
const ctx = canvas.getContext('2d');

let times = []
function displayInput() {
    
  const name = document.getElementById("nameInput").value;
  const data = document.getElementById("dataInput").value;
  document.getElementById("title").innerText = name + "'s cubing data";
    

let array = data.split(';');
document.getElementById("amountOfSolves").innerText = "Solves: "  + times.length;


for(i = 0; i < array.length; i++){
    if (((i - 1) % 5) === 0 && i > 5){
        times.push(array[i])
    }
}

  document.getElementById("maxMin").innerText = "Best time, Worst time: " + Math.min(...times) + ", " + Math.max(...times);


document.getElementById("plainScores").innerText = ""
for(i = 0; i < times.length; i++){
  document.getElementById("plainScores").innerText += (i+1) + ". " + (Math.round(times[i] * 100)/100) + "\n"
}   

    document.getElementById('myCanvas').width = window.innerWidth - 500;
  ctx.fillStyle = 'white';

  ctx.fillRect(0, 0, 4000, 4000);

  ctx.fillStyle = 'blue';
ctx.beginPath();
ctx.moveTo(0, 0);

    for(i = 0; i < times.length; i++){
    ctx.lineTo(((document.getElementById('myCanvas').width - 20)/times.length) * i, ((times[i]/Math.max(...times)) * 280) * -1 + 290);
    ctx.stroke();
    ctx.fillRect(((document.getElementById('myCanvas').width - 20)/times.length) * i, ((times[i]/Math.max(...times)) * 280) * -1 + 290, 3, 3);
    }
}


let timeLeft = 0;

function startTimer(){
            displayInput()

    if (document.getElementById("timerButton").innerText === "Start Timer"){
        if (timerGoing === false){
            timeLeft = Date.now()
            timerElement.textContent = 0

        }
        var timerGoing = true;
        
    document.getElementById("timerButton").innerText = "Stop Timer";
        timeLeft = Date.now(); // Set countdown time in seconds
    const timerElement = document.getElementById("timer");

    const countdown = setInterval(() => {
        if (document.getElementById("timerButton").innerText === "Stop Timer"){
        timerElement.textContent = Math.round((Date.now() - timeLeft)/100)/10

        console.log(Date.now());
        
    }
    else{
          clearInterval(countdown);

    }
      
    }, 10); // Update every second
}
else{

    document.getElementById("timer").innerText = Math.round((Date.now() - timeLeft)/10)/100
    timerGoing = false;
        document.getElementById("timerButton").innerText = "Start Timer";

        times.push((Date.now() - timeLeft)/1000)


}
        

displayInput()
}



</script>




        
        <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RNHLEQX9J1"></script>
<script>
    
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RNHLEQX9J1');
</script>
    </main>
    <footer>
        <p>&copy; 2025 Your Name or Company</p>
    </footer>
    <script src="script.js"></script> <!-- Link to your JavaScript file -->
</body>
</html>
